# ft_printf Wiki

ft_printf プロジェクトの包括的な学習資料集です。

このWikiは、42 Tokyoの学生がft_printfプロジェクトを深く理解し、単にコードを書くだけでなく「なぜそう設計するのか」「コンピュータの内部で何が起きているのか」を学ぶための教材です。

---

## 目次

| # | ページ | 内容 | 想定学習時間 |
|---|--------|------|-------------|
| 01 | [背景知識](01-background.md) | printf の歴史と内部動作、variadic functions の ABI レベルの解説、format string の解析アルゴリズム、整数表現の数学的基礎、write system call の詳細 | 3-4時間 |
| 02 | [前提知識](02-prerequisites.md) | C言語の型システム、stdarg.h の内部実装、static library の仕組み、Makefile の動作原理、基数変換の数学的証明 | 3-4時間 |
| 03 | [要件定義](03-requirements.md) | 全変換指定子の詳細仕様、戻り値の厳密な定義、compilation 要件、禁止事項の根拠、本物の printf との網羅的比較 | 2-3時間 |
| 04 | [評価基準](04-evaluation.md) | evaluator のチェック項目詳細、全 edge case の解説、よくあるバグの原因と修正、Norm 準拠チェック、defense（口頭試問）完全対策 | 3-4時間 |
| 05 | [解法解説](05-solution.md) | アーキテクチャ全体図、各関数の完全なコードウォークスルー、ステップバイステップ実行トレース、エラー伝播の詳細フロー | 4-5時間 |
| 06 | [設計原則](06-design.md) | dispatcher パターンの詳細比較、再帰 vs 反復の分析、エラーハンドリング戦略、モジュール分割の理論、拡張性設計 | 3-4時間 |
| 07 | [学習ガイド](07-study-guide.md) | 段階的な学習ロードマップ、重要概念の深掘り、デバッグ技法、テスト戦略、実践演習問題 | 4-5時間 |
| 08 | [学習目標](08-learning-goals.md) | variadic functions の ABI 解説、型システムの完全ガイド、library 作成の理論と実践、format string parsing の理論、発展的話題 | 3-4時間 |
| 09 | [理解度チェック](09-comprehension-check.md) | 基礎知識 Q&A、コードトレース問題、設計判断問題、バグ発見問題、defense 完全対策、総合問題（55問以上） | 3-4時間 |

**総想定学習時間: 28-37時間**（通読 + 演習含む）

---

## プロジェクト概要

### ft_printf とは何か

ft_printf は C 標準ライブラリの `printf()` を再実装するプロジェクトです。42のカリキュラムにおいて、libft の次に取り組む重要なプロジェクトであり、以下の能力を養うことを目的としています。

1. **可変長引数関数（variadic functions）** の理解と実装
2. **format string の解析（parsing）** アルゴリズムの設計
3. **型変換（type conversion）** と型システムの深い理解
4. **static library の作成** とビルドシステムの構築
5. **エラーハンドリング** の設計パターン
6. **モジュール分割** による保守性の高いコード設計

### なぜ printf を再実装するのか

printf の再実装は、単なるプログラミング演習ではありません。以下の理由から、CS教育において非常に価値のある課題です。

**1. コンピュータサイエンスの基礎を横断的に学べる**

printf は一見単純な関数ですが、その内部では多くのCS概念が交差しています。

- **数値表現**: 2の補数、基数変換、浮動小数点（bonus外だが理解は重要）
- **メモリモデル**: スタック、ポインタ、型のメモリレイアウト
- **ABI（Application Binary Interface）**: 関数呼び出し規約、レジスタの使い方
- **文字コード**: ASCII、文字と数値の対応
- **システムプログラミング**: system call（write）、file descriptor
- **アルゴリズム**: 再帰、基数変換アルゴリズム
- **ソフトウェア設計**: ディスパッチャパターン、モジュール分割、エラー伝播

**2. 「当たり前に使っている関数」の中身を知ることの価値**

プログラマが最も頻繁に使う関数の一つである printf を再実装することで、「ブラックボックス」だった標準ライブラリの中身を理解できます。これは、問題が起きたときに原因を推定する力（debugging能力）に直結します。

**3. 42のカリキュラムにおける位置づけ**

ft_printf で学ぶ概念は、後続のプロジェクトで繰り返し使われます。

```
ft_printf で学ぶこと        活かされるプロジェクト
---------------------------------------------------
write() system call    -->  get_next_line, pipex, minishell
可変長引数             -->  独自のロギング関数
format string parsing  -->  minishell（コマンド解析）
static library 作成    -->  全プロジェクト（libft拡張）
エラーハンドリング     -->  全プロジェクト
モジュール設計         -->  全プロジェクト
```

### 対応する変換指定子

| 指定子 | 説明 | 引数の型 | 出力例 |
|--------|------|---------|--------|
| `%c` | 1文字を出力 | `int`（char が promote される） | `'A'` -> `A` |
| `%s` | 文字列を出力 | `char *` | `"hello"` -> `hello` |
| `%p` | pointer を16進数で出力（`0x` prefix 付き） | `void *` | `0x7ffd559ffc54` |
| `%d` | 10進数の符号付き整数を出力 | `int` | `-42` -> `-42` |
| `%i` | 10進数の符号付き整数を出力（`%d` と同じ） | `int` | `42` -> `42` |
| `%u` | 10進数の符号なし整数を出力 | `unsigned int` | `4294967295` |
| `%x` | 16進数（小文字）を出力 | `unsigned int` | `255` -> `ff` |
| `%X` | 16進数（大文字）を出力 | `unsigned int` | `255` -> `FF` |
| `%%` | literal の `%` を出力 | なし | `%%` -> `%` |

### 実装ファイル構成

```
ft_printf/
  Makefile              -- ビルド自動化スクリプト
  ft_printf.h           -- ヘッダファイル（関数プロトタイプ）
  ft_printf.c           -- メイン関数 + ディスパッチャ
  ft_print_char.c       -- %c, %% の出力
  ft_print_str.c        -- %s の出力
  ft_print_ptr.c        -- %p の出力
  ft_print_nbr.c        -- %d, %i の出力
  ft_print_unsigned.c   -- %u の出力
  ft_print_hex.c        -- %x, %X の出力
```

---

## この Wiki の使い方

### 初学者（printf を初めて実装する人）

1. まず **01-背景知識** を通読し、printf の全体像を把握する
2. **02-前提知識** で必要な技術要素を確認する
3. **03-要件定義** で「何を作るか」を正確に理解する
4. **07-学習ガイド** のステップに従って実装を進める
5. 実装中に詰まったら **05-解法解説** を参照する
6. 完成後に **09-理解度チェック** で理解を確認する

### 中級者（実装は終わったが理解を深めたい人）

1. **06-設計原則** で設計判断の理由を理解する
2. **08-学習目標** で学んだことを整理する
3. **09-理解度チェック** で弱点を特定する
4. **04-評価基準** で評価対策を行う

### 評価前の最終確認

1. **04-評価基準** の全チェック項目を確認する
2. **09-理解度チェック** の defense Q&A を練習する
3. **01-背景知識** の「なぜ」に関する部分を復習する

---

## 表記規則

このWikiでは以下の表記規則を使用します。

- **技術用語**: 日本語（英語）の形式で併記（例: 可変長引数関数（variadic functions））
- **コード例**: 42 Norm に準拠（タブインデント、関数25行以内）
- **重要な注意点**: `> ` による引用ブロックで強調
- **やってみよう**: 各セクションの実践演習
- **よくある間違い**: 具体的なバグコードとその修正

---

## 参考資料

### 公式ドキュメント
- C11 Standard (ISO/IEC 9899:2011) - Section 7.21.6: Formatted input/output functions
- POSIX.1-2017 - write(2) man page
- System V ABI - AMD64 Architecture Processor Supplement

### 42 関連
- 42 Norm v3 - コーディング規約
- ft_printf subject PDF - プロジェクト要件書

### 推奨書籍
- K&R "The C Programming Language" (2nd Edition) - Chapter 7: Input and Output
- "Computer Systems: A Programmer's Perspective" (CS:APP) - Chapter 3: Machine-Level Representation of Programs

---

## 学習の進め方のヒント

### 効率的な学習順序

1. **まず全体像を把握する**: README と 01-背景知識を通読
2. **手を動かす前に要件を理解する**: 03-要件定義を精読
3. **段階的に実装する**: 07-学習ガイドのステップに従う
4. **行き詰まったら解法を参照する**: 05-解法解説（ただし自力で考える時間も大切）
5. **設計の理由を考える**: 06-設計原則で「なぜ」を理解する
6. **知識を定着させる**: 09-理解度チェックで自己テスト
7. **評価に備える**: 04-評価基準で defense 対策

### 各ページの想定読了時間

| ページ | 通読 | 通読 + 演習 |
|--------|------|-----------|
| 01-背景知識 | 1.5時間 | 3-4時間 |
| 02-前提知識 | 1.5時間 | 3-4時間 |
| 03-要件定義 | 1時間 | 2-3時間 |
| 04-評価基準 | 1.5時間 | 3-4時間 |
| 05-解法解説 | 2時間 | 4-5時間 |
| 06-設計原則 | 1.5時間 | 3-4時間 |
| 07-学習ガイド | 2時間 | 4-5時間 |
| 08-学習目標 | 1.5時間 | 3-4時間 |
| 09-理解度チェック | 2時間 | 3-4時間 |

### このWikiの改善について

この Wiki は継続的に改善されています。内容に誤りや改善点を見つけた場合は、フィードバックをお寄せください。
